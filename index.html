<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Builder Generator | Google Sheets Form Creator</title>
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #7209b7;
            --success: #4cc9f0;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --border: #dee2e6;
            --code-bg: #2d3748;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: var(--dark);
            line-height: 1.6;
            font-size: 16px;
            -webkit-font-smoothing: antialiased;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px;
        }
        
        /* Header - Mobile Optimized */
        .header {
            text-align: center;
            padding: 25px 15px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            margin-bottom: 20px;
        }
        
        .header h1 {
            font-size: clamp(1.8rem, 5vw, 2.8rem);
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 12px;
            line-height: 1.3;
        }
        
        .header p {
            font-size: clamp(1rem, 3vw, 1.2rem);
            color: var(--gray);
            max-width: 600px;
            margin: 0 auto 20px;
            line-height: 1.5;
        }
        
        .badge-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
            margin-top: 15px;
        }
        
        .badge {
            display: inline-block;
            background: var(--success);
            color: white;
            padding: 6px 12px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.8rem;
            white-space: nowrap;
        }
        
        /* Main Content - Mobile First */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        @media (min-width: 768px) {
            .main-content {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 25px;
            }
        }
        
        /* Panel - Mobile Optimized */
        .panel {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.06);
            width: 100%;
        }
        
        .panel-title {
            font-size: 1.3rem;
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--border);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .panel-title i {
            font-size: 1.2rem;
        }
        
        /* Form Builder - Mobile Optimized */
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--dark);
            font-size: 0.95rem;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        @media (min-width: 480px) {
            .input-group {
                flex-direction: row;
            }
        }
        
        input, select, textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
            font-family: inherit;
            -webkit-appearance: none;
        }
        
        /* Improve touch targets */
        input, select {
            min-height: 52px;
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.15);
        }
        
        /* Mobile-friendly buttons */
        .btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 16px 20px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            min-height: 56px;
            touch-action: manipulation;
        }
        
        .btn:active {
            transform: scale(0.98);
            box-shadow: 0 4px 12px rgba(67, 97, 238, 0.2);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(67, 97, 238, 0.2);
        }
        
        .btn-small {
            padding: 12px 16px;
            font-size: 0.9rem;
            min-height: 44px;
        }
        
        /* Fields List - Mobile Optimized */
        .fields-list {
            margin-top: 15px;
            max-height: 300px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .field-item {
            background: var(--light);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            border-left: 4px solid var(--primary);
            touch-action: manipulation;
        }
        
        @media (min-width: 480px) {
            .field-item {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
        }
        
        .field-info h4 {
            color: var(--dark);
            margin-bottom: 4px;
            font-size: 1rem;
        }
        
        .field-info p {
            color: var(--gray);
            font-size: 0.85rem;
        }
        
        .field-actions {
            display: flex;
            gap: 8px;
            flex-shrink: 0;
        }
        
        .field-actions button {
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            padding: 8px;
            border-radius: 6px;
            font-size: 1rem;
            min-width: 44px;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .field-actions button:active {
            background: rgba(0,0,0,0.05);
        }
        
        /* Code Output - Mobile Optimized */
        .code-section {
            background: var(--code-bg);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
        }
        
        .code-header {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        @media (min-width: 480px) {
            .code-header {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
        }
        
        .code-header h4 {
            color: #e2e8f0;
            font-size: 1rem;
            margin: 0;
        }
        
        .code-block {
            background: #1a202c;
            border-radius: 8px;
            padding: 15px;
            overflow-x: auto;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 0.85rem;
            line-height: 1.5;
            color: #e2e8f0;
            -webkit-overflow-scrolling: touch;
            max-height: 300px;
            max-width: 800px;
            overflow-y: auto;
        }
        
        .copy-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            touch-action: manipulation;
        }
        
        .copy-btn:active {
            background: var(--primary-dark);
            transform: scale(0.98);
        }
        
        /* Steps Panel - Mobile Optimized */
        .steps-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.06);
            margin-bottom: 30px;
        }
        
        .step {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 25px;
            border-bottom: 1px solid var(--border);
        }
        
        .step:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        @media (min-width: 768px) {
            .step {
                flex-direction: row;
                gap: 20px;
            }
        }
        
        .step-number {
            background: var(--primary);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1rem;
            flex-shrink: 0;
        }
        
        .step-content h3 {
            color: var(--dark);
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .step-content p {
            color: var(--gray);
            margin-bottom: 15px;
            font-size: 0.95rem;
            line-height: 1.6;
        }
        
        .step-code {
            background: var(--light);
            padding: 12px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            color: var(--dark);
            margin: 10px 0;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        /* Alert - Mobile Optimized */
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            display: none;
            font-size: 0.95rem;
        }
        
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        /* Instructions - Mobile Optimized */
        .instructions {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.06);
            margin-bottom: 30px;
        }
        
        .instructions h2 {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--border);
            font-size: 1.3rem;
        }
        
        .instruction-item {
            background: var(--light);
            padding: 18px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid var(--success);
        }
        
        .instruction-item h3 {
            color: var(--dark);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .instruction-item p {
            color: var(--gray);
            font-size: 0.95rem;
            line-height: 1.5;
            margin-bottom: 5px;
        }
        
        /* Loading - Mobile Optimized */
        .loading {
            display: none;
            text-align: center;
            padding: 30px;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Footer - Mobile Optimized */
        .footer {
            text-align: center;
            padding: 30px 15px;
            color: var(--gray);
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .github-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            margin-top: 10px;
            padding: 10px;
            font-size: 0.9rem;
            touch-action: manipulation;
        }
        
        /* Mobile-specific improvements */
        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }
            
            .header {
                padding: 20px 10px;
                margin-bottom: 15px;
            }
            
            .panel {
                padding: 15px;
            }
            
            .badge {
                font-size: 0.75rem;
                padding: 5px 10px;
            }
            
            .code-block {
                font-size: 0.8rem;
                padding: 12px;
            }
            
            .step-content h3 {
                font-size: 1.1rem;
            }
            
            .step-content p {
                font-size: 0.9rem;
            }
        }
        
        /* Prevent text selection on interactive elements */
        .btn, .copy-btn, .field-actions button {
            user-select: none;
        }
        
        /* Improve scroll on mobile */
        html {
            scroll-behavior: smooth;
        }
        
        /* Better touch feedback */
        .btn:active, .copy-btn:active, .field-actions button:active {
            transition: transform 0.1s;
        }
        
        /* Fix for mobile keyboard */
        input, textarea {
            font-size: 16px; /* Prevent iOS zoom */
        }
        
        /* Loading state for buttons */
        .btn.loading {
            opacity: 0.7;
            cursor: not-allowed;
        }
        
        /* Mobile navigation improvements */
        a {
            color: var(--primary);
            text-decoration: none;
        }
        
        a:active {
            opacity: 0.8;
        }
        
        /* Better spacing for mobile */
        * + * {
            margin-top: 0;
        }
        
        .form-group + .form-group,
        .field-item + .field-item,
        .step + .step,
        .instruction-item + .instruction-item {
            margin-top: 15px;
        }
        
        /* Hide scrollbar but keep functionality */
        .fields-list::-webkit-scrollbar,
        .code-block::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        
        .fields-list::-webkit-scrollbar-track,
        .code-block::-webkit-scrollbar-track {
            background: transparent;
        }
        
        .fields-list::-webkit-scrollbar-thumb,
        .code-block::-webkit-scrollbar-thumb {
            background: rgba(0,0,0,0.2);
            border-radius: 3px;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1><i class="fas fa-wrench"></i> Form Builder</h1>
            <p>Create custom HTML forms with Google Sheets backend. Generate code in seconds, deploy in minutes.</p>
            <div class="badge-container">
                <span class="badge"><i class="fas fa-code"></i> Code Generator</span>
                <span class="badge"><i class="fas fa-file-code"></i> HTML/JS</span>
                <span class="badge"><i class="fas fa-table"></i> Google Sheets</span>
                <span class="badge"><i class="fas fa-rocket"></i> Easy Deployment</span>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Form Builder Panel -->
            <div class="panel">
                <h2 class="panel-title"><i class="fas fa-plus-circle"></i> Build Your Form</h2>
                
                <div id="alert" class="alert"></div>
                
                <div class="form-group">
                    <label for="formName">Form Name</label>
                    <input type="text" id="formName" placeholder="e.g., Contact Form, Registration Form">
                    <small style="color: var(--gray); display: block; margin-top: 5px;">This will be used to name your Google Sheet</small>
                </div>
                
                <div class="form-group">
                    <label>Add Form Fields</label>
                    <div class="input-group">
                        <input type="text" id="fieldName" placeholder="Field Label (e.g., Email Address)">
                        <select id="fieldType">
                            <option value="text">Text</option>
                            <option value="email">Email</option>
                            <option value="number">Number</option>
                            <option value="tel">Phone</option>
                            <option value="textarea">Text Area</option>
                            <option value="date">Date</option>
                            <option value="url">URL</option>
                            <option value="select">Dropdown</option>
                            <option value="checkbox">Checkbox</option>
                        </select>
                        <button class="btn btn-small" onclick="addField()">
                            <i class="fas fa-plus"></i> Add Field
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Your Form Fields</label>
                    <div id="fieldsList" class="fields-list">
                        <div style="text-align: center; color: var(--gray); padding: 30px; background: var(--light); border-radius: 8px;">
                            <i class="fas fa-inbox" style="font-size: 2rem; margin-bottom: 10px;"></i>
                            <p>No fields added yet. Add fields above to get started.</p>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <button class="btn" onclick="generateCode()">
                        <i class="fas fa-bolt"></i> Generate Code & Instructions
                    </button>
                </div>
            </div>

            <!-- Code Output Panel -->
            <div class="panel">
                <h2 class="panel-title"><i class="fas fa-code"></i> Generated Code</h2>
                
                <div id="loading" class="loading">
                    <div class="spinner"></div>
                    <p>Generating your form code...</p>
                </div>
                
                <div id="codeOutput" style="display: none;">
                    <div class="code-section">
                        <div class="code-header">
                            <h4><i class="fas fa-code"></i> HTML Form Code</h4>
                            <button class="copy-btn" onclick="copyCode('htmlCode')">
                                <i class="far fa-copy"></i> Copy
                            </button>
                        </div>
                        <pre id="htmlCode" class="code-block"></pre>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-header">
                            <h4><i class="fab fa-js-square"></i> JavaScript Code</h4>
                            <button class="copy-btn" onclick="copyCode('jsCode')">
                                <i class="far fa-copy"></i> Copy
                            </button>
                        </div>
                        <pre id="jsCode" class="code-block"></pre>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-header">
                            <h4><i class="fas fa-cogs"></i> Google Apps Script Backend</h4>
                            <button class="copy-btn" onclick="copyCode('gasCode')">
                                <i class="far fa-copy"></i> Copy
                            </button>
                        </div>
                        <pre id="gasCode" class="code-block"></pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- Deployment Steps -->
        <div class="steps-container">
            <h2 class="panel-title"><i class="fas fa-rocket"></i> Deployment Steps</h2>
            
            <div class="step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <h3>Create Google Apps Script</h3>
                    <p>Go to <a href="https://script.google.com" target="_blank">script.google.com</a> and create a new project.</p>
                    <p>Paste the generated Google Apps Script code into the editor.</p>
                    <div class="step-code">
                        // 1. Click "New Project"<br>
                        // 2. Delete default code<br>
                        // 3. Paste the generated code<br>
                        // 4. Click Save (Ctrl+S)
                    </div>
                </div>
            </div>
            
            <div class="step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <h3>Create Google Sheet</h3>
                    <p>Create a new Google Sheet at <a href="https://sheets.google.com" target="_blank">sheets.google.com</a></p>
                    <p>Copy the Sheet ID from the URL (it's the long string after /d/)</p>
                    <div class="step-code">
                        URL: https://docs.google.com/spreadsheets/d/YOUR_SHEET_ID/edit<br>
                        Copy: YOUR_SHEET_ID
                    </div>
                </div>
            </div>
            
            <div class="step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <h3>Update Script with Sheet ID</h3>
                    <p>In the Apps Script code, replace <code>'YOUR_SHEET_ID_HERE'</code> with your actual Sheet ID.</p>
                    <div class="step-code">
                        // Find this line in the code:<br>
                        const SHEET_ID = 'YOUR_SHEET_ID_HERE';<br><br>
                        // Replace with your actual Sheet ID:<br>
                        const SHEET_ID = '1DDAaRWCqvxFAnB5P6gKe5HffkpcCoYRU...';
                    </div>
                </div>
            </div>
            
            <div class="step">
                <div class="step-number">4</div>
                <div class="step-content">
                    <h3>Deploy as Web App</h3>
                    <p>Click "Deploy" → "New deployment" → Select "Web app" → Configure:</p>
                    <ul style="margin-left: 20px; color: var(--gray);">
                        <li>Execute as: Me</li>
                        <li>Who has access: Anyone (or "Anyone with Google account")</li>
                        <li>Click "Deploy"</li>
                    </ul>
                    <p>Copy the generated Web App URL - you'll need this for your JavaScript code.</p>
                </div>
            </div>
            
            <div class="step">
                <div class="step-number">5</div>
                <div class="step-content">
                    <h3>Integrate with Your Website</h3>
                    <p>Add the generated HTML form to your webpage.</p>
                    <p>Update the JavaScript code with your Web App URL:</p>
                    <div class="step-code">
                        // In the JavaScript code, replace this URL:<br>
                        const GOOGLE_SCRIPT_URL = 'YOUR_DEPLOYED_SCRIPT_URL';<br><br>
                        // With your actual Web App URL<br>
                        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/.../exec';
                    </div>
                </div>
            </div>
        </div>

        
        <!-- Footer -->
        <footer class="footer">
            <p>Form Builder Generator • Generate custom forms with Google Sheets backend</p>
            <p>Made with <i class="fas fa-heart" style="color: #e91e63;"></i> for developers</p>
            <p></p>
            <a href="https://github.com/SOMILSRIVASTAV18/Form-Builder" target="_blank" class="github-link">
                <i class="fab fa-github"></i> If you like it give it Star on GitHub
            </a>
            
        </footer>
    </div>

    <script>
        let formFields = [];
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Enter key support for adding fields
            document.getElementById('fieldName').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    addField();
                }
            });
            
            // Demo form setup
            setupDemo();
            
            // Improve mobile keyboard experience
            const inputs = document.querySelectorAll('input, textarea, select');
            inputs.forEach(input => {
                input.addEventListener('focus', function() {
                    // Scroll input into view on mobile
                    setTimeout(() => {
                        this.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 300);
                });
            });
        });
        
        function setupDemo() {
            // Add some demo fields to help users understand
            const demoFields = [
                { name: 'Full Name', type: 'text', id: 'full_name' },
                { name: 'Email Address', type: 'email', id: 'email' },
                { name: 'Message', type: 'textarea', id: 'message' }
            ];
            
            demoFields.forEach(field => {
                const fieldObj = {
                    id: field.id,
                    name: field.name,
                    type: field.type,
                    required: true
                };
                formFields.push(fieldObj);
            });
            
            updateFieldsList();
        }
        
        function showAlert(message, type = 'success') {
            const alert = document.getElementById('alert');
            alert.className = `alert alert-${type}`;
            alert.innerHTML = message;
            alert.style.display = 'block';
            
            // Scroll to alert on mobile
            setTimeout(() => {
                alert.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
            
            setTimeout(() => {
                alert.style.display = 'none';
            }, 5000);
        }
        
        function addField() {
            const fieldName = document.getElementById('fieldName').value.trim();
            const fieldType = document.getElementById('fieldType').value;
            
            if (!fieldName) {
                showAlert('Please enter a field name', 'error');
                return;
            }
            
            // Generate field ID
            const fieldId = fieldName.toLowerCase()
                .replace(/[^a-z0-9\s]/g, '')
                .replace(/\s+/g, '_');
            
            const field = {
                id: fieldId,
                name: fieldName,
                type: fieldType,
                required: true
            };
            
            formFields.push(field);
            updateFieldsList();
            
            // Clear input
            document.getElementById('fieldName').value = '';
            document.getElementById('fieldName').focus();
            
            showAlert(`Added "${fieldName}" field`);
        }
        
        function updateFieldsList() {
            const fieldsList = document.getElementById('fieldsList');
            
            if (formFields.length === 0) {
                fieldsList.innerHTML = `
                    <div style="text-align: center; color: var(--gray); padding: 30px; background: var(--light); border-radius: 8px;">
                        <i class="fas fa-inbox" style="font-size: 2rem; margin-bottom: 10px;"></i>
                        <p>No fields added yet. Add fields above to get started.</p>
                    </div>
                `;
                return;
            }
            
            fieldsList.innerHTML = formFields.map((field, index) => `
                <div class="field-item">
                    <div class="field-info">
                        <h4>${field.name}</h4>
                        <p>Type: ${field.type} | ID: ${field.id}</p>
                    </div>
                    <div class="field-actions">
                        <button onclick="moveField(${index}, -1)" title="Move Up" aria-label="Move field up">
                            <i class="fas fa-arrow-up"></i>
                        </button>
                        <button onclick="moveField(${index}, 1)" title="Move Down" aria-label="Move field down">
                            <i class="fas fa-arrow-down"></i>
                        </button>
                        <button onclick="removeField(${index})" title="Remove" aria-label="Remove field">
                            <i class="fas fa-trash" style="color: #dc3545;"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        function moveField(index, direction) {
            if ((index === 0 && direction === -1) || (index === formFields.length - 1 && direction === 1)) {
                showAlert('Cannot move field further', 'error');
                return;
            }
            
            const newIndex = index + direction;
            [formFields[index], formFields[newIndex]] = [formFields[newIndex], formFields[index]];
            updateFieldsList();
        }
        
        function removeField(index) {
            if (confirm('Are you sure you want to remove this field?')) {
                const fieldName = formFields[index].name;
                formFields.splice(index, 1);
                updateFieldsList();
                showAlert(`Removed "${fieldName}" field`);
            }
        }
        
        function generateCode() {
            const formName = document.getElementById('formName').value.trim();
            
            if (!formName) {
                showAlert('Please enter a form name', 'error');
                return;
            }
            
            if (formFields.length === 0) {
                showAlert('Please add at least one field to the form', 'error');
                return;
            }
            
            // Show loading
            document.getElementById('loading').style.display = 'block';
            document.getElementById('codeOutput').style.display = 'none';
            
            // Add loading state to button
            const generateBtn = event.currentTarget;
            const originalText = generateBtn.innerHTML;
            generateBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating...';
            generateBtn.classList.add('loading');
            
            setTimeout(() => {
                // Generate codes
                const htmlCode = generateHTMLCode(formName);
                const jsCode = generateJSCode();
                const gasCode = generateGASCode(formName);
                
                // Display codes
                document.getElementById('htmlCode').textContent = htmlCode;
                document.getElementById('jsCode').textContent = jsCode;
                document.getElementById('gasCode').textContent = gasCode;
                
                // Show code output
                document.getElementById('loading').style.display = 'none';
                document.getElementById('codeOutput').style.display = 'block';
                
                // Restore button state
                generateBtn.innerHTML = originalText;
                generateBtn.classList.remove('loading');
                
                // Scroll to code on mobile
                setTimeout(() => {
                    document.getElementById('codeOutput').scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'start' 
                    });
                }, 300);
                
                showAlert('Code generated successfully! Follow the deployment steps below.');
            }, 800);
        }
        
        function generateHTMLCode(formName) {
            const formId = formName.toLowerCase().replace(/[^a-z0-9]/g, '_') + '_form';
            
            let html = `<!-- ${formName} Form -->\n`;
            html += `<form id="${formId}">\n`;
            html += `    <div class="form-container">\n`;
            
            formFields.forEach(field => {
                html += `        <div class="form-group">\n`;
                html += `            <label for="${field.id}">${field.name}</label>\n`;
                
                if (field.type === 'textarea') {
                    html += `            <textarea id="${field.id}" name="${field.id}" placeholder="Enter ${field.name.toLowerCase()}" ${field.required ? 'required' : ''}></textarea>\n`;
                } else if (field.type === 'select') {
                    html += `            <select id="${field.id}" name="${field.id}" ${field.required ? 'required' : ''}>\n`;
                    html += `                <option value="">Select ${field.name.toLowerCase()}</option>\n`;
                    html += `                <option value="option1">Option 1</option>\n`;
                    html += `                <option value="option2">Option 2</option>\n`;
                    html += `                <option value="option3">Option 3</option>\n`;
                    html += `            </select>\n`;
                } else if (field.type === 'checkbox') {
                    html += `            <div class="checkbox-group">\n`;
                    html += `                <input type="checkbox" id="${field.id}" name="${field.id}" value="yes">\n`;
                    html += `                <label for="${field.id}">${field.name}</label>\n`;
                    html += `            </div>\n`;
                } else {
                    html += `            <input type="${field.type}" id="${field.id}" name="${field.id}" placeholder="Enter ${field.name.toLowerCase()}" ${field.required ? 'required' : ''}>\n`;
                }
                
                html += `        </div>\n`;
            });
            
            html += `        <button type="submit" id="submit-btn">Submit Form</button>\n`;
            html += `    </div>\n`;
            html += `</form>\n\n`;
            html += `<!-- Add basic styling -->\n`;
            html += `<style>\n`;
            html += `    .form-container {\n`;
            html += `        max-width: 600px;\n`;
            html += `        margin: 0 auto;\n`;
            html += `        padding: 20px;\n`;
            html += `    }\n`;
            html += `    .form-group {\n`;
            html += `        margin-bottom: 20px;\n`;
            html += `    }\n`;
            html += `    label {\n`;
            html += `        display: block;\n`;
            html += `        margin-bottom: 5px;\n`;
            html += `        font-weight: 600;\n`;
            html += `    }\n`;
            html += `    input, select, textarea {\n`;
            html += `        width: 100%;\n`;
            html += `        padding: 12px;\n`;
            html += `        border: 1px solid #ddd;\n`;
            html += `        border-radius: 5px;\n`;
            html += `        font-size: 16px;\n`;
            html += `    }\n`;
            html += `    button[type="submit"] {\n`;
            html += `        background: #4361ee;\n`;
            html += `        color: white;\n`;
            html += `        border: none;\n`;
            html += `        padding: 14px 25px;\n`;
            html += `        border-radius: 5px;\n`;
            html += `        font-size: 16px;\n`;
            html += `        cursor: pointer;\n`;
            html += `        width: 100%;\n`;
            html += `    }\n`;
            html += `</style>`;
            
            return html;
        }
        
        function generateJSCode() {
            const formName = document.getElementById('formName').value.trim();
            const formId = formName.toLowerCase().replace(/[^a-z0-9]/g, '_') + '_form';
            
            let js = `// Form Submission for ${formName}\n`;
            js += `// Replace this URL with your deployed Google Apps Script Web App URL\n`;
            js += `const GOOGLE_SCRIPT_URL = 'YOUR_DEPLOYED_SCRIPT_URL';\n\n`;
            
            js += `document.addEventListener('DOMContentLoaded', function() {\n`;
            js += `    const form = document.getElementById('${formId}');\n`;
            js += `    const submitBtn = document.getElementById('submit-btn');\n\n`;
            
            js += `    form.addEventListener('submit', async function(e) {\n`;
            js += `        e.preventDefault();\n\n`;
            js += `        // Disable submit button during submission\n`;
            js += `        submitBtn.disabled = true;\n`;
            js += `        const originalText = submitBtn.textContent;\n`;
            js += `        submitBtn.textContent = 'Sending...';\n\n`;
            js += `        // Collect form data\n`;
            js += `        const formData = {\n`;
            
            formFields.forEach((field, index) => {
                js += `            ${field.id}: document.getElementById('${field.id}').${field.type === 'checkbox' ? 'checked' : 'value'}`;
                if (index < formFields.length - 1) js += ',';
                js += '\n';
            });
            
            js += `        };\n\n`;
            js += `        try {\n`;
            js += `            // Send to Google Apps Script\n`;
            js += `            const response = await fetch(GOOGLE_SCRIPT_URL, {\n`;
            js += `                method: 'POST',\n`;
            js += `                mode: 'no-cors', // Required for Google Apps Script\n`;
            js += `                headers: {\n`;
            js += `                    'Content-Type': 'application/json',\n`;
            js += `                },\n`;
            js += `                body: JSON.stringify(formData)\n`;
            js += `            });\n\n`;
            js += `            // Show success message\n`;
            js += `            alert('✅ Thank you! Your form has been submitted successfully.');\n`;
            js += `            form.reset();\n`;
            js += `        } catch (error) {\n`;
            js += `            alert('❌ Sorry, there was an error submitting the form. Please try again.');\n`;
            js += `            console.error('Form submission error:', error);\n`;
            js += `        } finally {\n`;
            js += `            // Re-enable submit button\n`;
            js += `            submitBtn.disabled = false;\n`;
            js += `            submitBtn.textContent = originalText;\n`;
            js += `        }\n`;
            js += `    });\n`;
            js += `});`;
            
            return js;
        }
        
        function generateGASCode(formName) {
            const fieldIds = formFields.map(f => f.id);
            const fieldNames = formFields.map(f => f.name);
            
            let gas = `// Google Apps Script Backend for ${formName}\n`;
            gas += `// Created: ${new Date().toLocaleDateString()}\n\n`;
            
            gas += `// Configuration\n`;
            gas += `const SHEET_ID = 'YOUR_SHEET_ID_HERE'; // Replace with your Google Sheet ID\n`;
            gas += `const SHEET_NAME = 'Form Submissions';\n`;
            gas += `const OWNER_EMAIL = 'your-email@example.com'; // Replace with your email\n\n`;
            
            gas += `function doPost(e) {\n`;
            gas += `  try {\n`;
            gas += `    // Parse incoming data\n`;
            gas += `    let data;\n`;
            gas += `    if (e.postData.type === 'application/json') {\n`;
            gas += `      data = JSON.parse(e.postData.contents);\n`;
            gas += `    } else {\n`;
            gas += `      data = e.parameter;\n`;
            gas += `    }\n\n`;
            
            gas += `    // Get or create sheet\n`;
            gas += `    const spreadsheet = SpreadsheetApp.openById(SHEET_ID);\n`;
            gas += `    let sheet = spreadsheet.getSheetByName(SHEET_NAME);\n\n`;
            
            gas += `    if (!sheet) {\n`;
            gas += `      sheet = spreadsheet.insertSheet(SHEET_NAME);\n`;
            gas += `      const headers = ['Timestamp', ${fieldNames.map(name => `'${name}'`).join(', ')}];\n`;
            gas += `      sheet.getRange(1, 1, 1, headers.length).setValues([headers]);\n`;
            gas += `      sheet.setFrozenRows(1);\n`;
            gas += `    }\n\n`;
            
            gas += `    // Prepare row data\n`;
            gas += `    const timestamp = new Date();\n`;
            gas += `    const rowData = [timestamp];\n\n`;
            
            fieldIds.forEach(id => {
                gas += `    rowData.push(data['${id}'] || '');\n`;
            });
            
            gas += `\n    // Append to sheet\n`;
            gas += `    sheet.appendRow(rowData);\n\n`;
            
            gas += `    // Optional: Send email notification\n`;
            gas += `    // sendEmailNotification(data, timestamp);\n\n`;
            
            gas += `    // Return success response\n`;
            gas += `    return ContentService\n`;
            gas += `      .createTextOutput(JSON.stringify({\n`;
            gas += `        success: true,\n`;
            gas += `        message: 'Form submitted successfully',\n`;
            gas += `        timestamp: timestamp.toISOString()\n`;
            gas += `      }))\n`;
            gas += `      .setMimetype(ContentService.MimeType.JSON)\n`;
            gas += `      .setHeader('Access-Control-Allow-Origin', '*');\n\n`;
            
            gas += `  } catch (error) {\n`;
            gas += `    return ContentService\n`;
            gas += `      .createTextOutput(JSON.stringify({\n`;
            gas += `        success: false,\n`;
            gas += `        error: error.toString(),\n`;
            gas += `        message: 'Failed to process form submission'\n`;
            gas += `      }))\n`;
            gas += `      .setMimetype(ContentService.MimeType.JSON)\n`;
            gas += `      .setHeader('Access-Control-Allow-Origin', '*');\n`;
            gas += `  }\n`;
            gas += `}\n\n`;
            
            gas += `function doGet(e) {\n`;
            gas += `  // Handle CORS preflight requests\n`;
            gas += `  if (e && e.parameter && e.parameter.method === 'options') {\n`;
            gas += `    return ContentService\n`;
            gas += `      .createTextOutput()\n`;
            gas += `      .setHeader('Access-Control-Allow-Origin', '*')\n`;
            gas += `      .setHeader('Access-Control-Allow-Methods', 'POST, GET, OPTIONS')\n`;
            gas += `      .setHeader('Access-Control-Allow-Headers', 'Content-Type')\n`;
            gas += `      .setMimetype(ContentService.MimeType.JSON);\n`;
            gas += `  }\n\n`;
            
            gas += `  return ContentService\n`;
            gas += `    .createTextOutput(JSON.stringify({\n`;
            gas += `      status: 'active',\n`;
            gas += `      formName: '${formName}',\n`;
            gas += `      fields: ${JSON.stringify(formFields)},\n`;
            gas += `      timestamp: new Date().toISOString()\n`;
            gas += `    }))\n`;
            gas += `    .setMimetype(ContentService.MimeType.JSON)\n`;
            gas += `    .setHeader('Access-Control-Allow-Origin', '*');\n`;
            gas += `}\n\n`;
            
            gas += `// Email notification function (optional)\n`;
            gas += `function sendEmailNotification(data, timestamp) {\n`;
            gas += `  try {\n`;
            gas += `    const subject = \`New ${formName} Submission\`;\n`;
            gas += `    let body = \`<h2>New Form Submission</h2>\`;\n`;
            gas += `    body += \`<p><strong>Time:</strong> \${timestamp.toLocaleString()}</p>\`;\n\n`;
            
            formFields.forEach((field, index) => {
                gas += `    body += \`<p><strong>\${'${field.name}'}:</strong> \${data['${field.id}'] || 'Not provided'}</p>\`;\n`;
            });
            
            gas += `\n    MailApp.sendEmail({\n`;
            gas += `      to: OWNER_EMAIL,\n`;
            gas += `      subject: subject,\n`;
            gas += `      htmlBody: body\n`;
            gas += `    });\n`;
            gas += `  } catch (emailError) {\n`;
            gas += `    console.error('Email error:', emailError);\n`;
            gas += `  }\n`;
            gas += `}\n\n`;
            
            gas += `// Setup function - run this once manually\n`;
            gas += `function setup() {\n`;
            gas += `  const spreadsheet = SpreadsheetApp.openById(SHEET_ID);\n`;
            gas += `  const sheet = spreadsheet.getSheetByName(SHEET_NAME) || spreadsheet.insertSheet(SHEET_NAME);\n\n`;
            
            gas += `  const headers = ['Timestamp', ${fieldNames.map(name => `'${name}'`).join(', ')}];\n`;
            gas += `  sheet.getRange(1, 1, 1, headers.length).setValues([headers]);\n\n`;
            gas += `  // Format headers\n`;
            gas += `  const headerRange = sheet.getRange(1, 1, 1, headers.length);\n`;
            gas += `  headerRange.setFontWeight('bold');\n`;
            gas += `  headerRange.setBackground('#f0f0f0');\n`;
            gas += `  headerRange.setFontSize(12);\n\n`;
            gas += `  sheet.setFrozenRows(1);\n`;
            gas += `  sheet.autoResizeColumns(1, headers.length);\n`;
            gas += `}`;
            
            return gas;
        }
        
        function copyCode(elementId) {
            const codeElement = document.getElementById(elementId);
            const textArea = document.createElement('textarea');
            textArea.value = codeElement.textContent;
            document.body.appendChild(textArea);
            textArea.select();
            
            // Special handling for mobile
            if (navigator.userAgent.match(/Android|iPhone|iPad|iPod/i)) {
                textArea.setSelectionRange(0, 99999); // For mobile devices
            }
            
            document.execCommand('copy');
            document.body.removeChild(textArea);
            
            // Show success feedback
            const copyBtn = event.currentTarget;
            const originalText = copyBtn.innerHTML;
            copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
            copyBtn.style.background = 'var(--success)';
            
            setTimeout(() => {
                copyBtn.innerHTML = originalText;
                copyBtn.style.background = '';
            }, 2000);
            
            showAlert('Code copied to clipboard!');
        }
    </script>
</body>
</html>